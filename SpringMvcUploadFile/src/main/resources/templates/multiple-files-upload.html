<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title id="pageTitle">Upload Files</title>

    <!--/*/ <th:block th:include="fragments/headerinc :: head"></th:block> /*/-->

</head>

<body>

<!--/*/ <th:block th:include="fragments/header :: header"></th:block> /*/-->


<div class="container mt-3 ">
    <div class="row justify-content-center">
        <h2>Upload Multiple Files</h2>
    </div>
    <div class="row justify-content-center">
        <form method="POST" th:action="@{/admin/upload/multiple}" id="multipleUploadForm" enctype="multipart/form-data">
            <input id="multipleFileUploadInput" type="file"  name="files" multiple required>

            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </form>
        <div class="mt-2" th:if="${message}">
            <h2 th:text="${message}"/>
        </div>
    </div>
</div>
<script>

    var multipleUploadForm = document.querySelector('#multipleUploadForm');
    var multipleFileUploadInput = document.querySelector('#multipleUploadInput');


    function uploadMultipleFiles(files) {
        var formData = new FormData();
        for(var index = 0; index < files.length; index++) {
            formData.append("files", files[index]);
        }
    }

    multipleUploadForm.addEventListener('submit', function(event){
        var files = multipleFileUploadInput.files;

        uploadMultipleFiles(files);
        event.preventDefault();
    }, true);


</script>
</body>
</html>